--==============================================================================
-- Nombre de la tabla:
--   PRODUCTOB
-- Descripción:
--   Bitácora de la Tabla de Productos
-- Objetivo:
--   Almacenar los cambios realizados en la tabla de productos, los cuales
--   pueden ser: inserción, actualización o eliminación.
-- Tipo de tabla:
--   Bitácora
-- Origen de los datos:
--   Se ingresa un registro cuando se realiza un cambio en la tabla de los
--   productos.
--==============================================================================
-- Cambios Realizados
--   - No Cambio....: ID-001
--   - Responsable..: Danny García Reyes
--   - Fecha........: Febrero 2023
--   - Observaciones: Creación de la tabla.
--==============================================================================
CREATE TABLE PRODUCTOB (
  ID_PRODUCTO     FOR COLUMN BPROIDPROD INTEGER       NOT NULL,
  FECHA_EVENTO    FOR COLUMN BPROFECEVN TIMESTAMP     NOT NULL,
  NOMBRE_PRODUCTO FOR COLUMN BPRONOMBRE CHAR(30)      NOT NULL WITH DEFAULT '',
  PRECIO          FOR COLUMN BPROPRECIO DECIMAL(13,2) NOT NULL WITH DEFAULT 0,
  STOCK           FOR COLUMN BPROSTOCKP INTEGER       NOT NULL WITH DEFAULT 0,
  ID_CATEGORIA    FOR COLUMN BPROIDCATE CHAR(5)       NOT NULL,
  TIPO_EVENTO     FOR COLUMN BPROTIPEVN CHAR(1)       NOT NULL WITH DEFAULT 'I',
  USUARIO_EVENTO  FOR COLUMN BPROUSUEVN CHAR(18)     NOT NULL WITH DEFAULT USER,
  CONSTRAINT BPROTIPEVN_CHK_CST CHECK (BPROTIPEVN IN ('I', 'A', 'E')),
  CONSTRAINT PRODUCTOB_PK PRIMARY KEY (BPROIDPROD, BPROFECEVN)
) RCDFMT RPRODUCTOB;

RENAME TABLE PRODUCTOB TO BITACORA_TABLA_DE_PRODUCTOS
  FOR SYSTEM NAME PRODUCTOB;

LABEL ON TABLE PRODUCTOB IS 'BITACORA DE TABLA DE PRODUCTOS';

COMMENT ON TABLE PRODUCTOB IS 'BITACORA DE TABLA DE PRODUCTOS';

-- Headers
LABEL ON COLUMN PRODUCTOB (
  BPROIDPROD IS 'ID PRODUCTO',
  BPROFECEVN IS 'FECHA EVENTO',
  BPRONOMBRE IS 'NOMBRE PRODUCTO',
  BPROPRECIO IS 'PRECIO PRODUCTO',
  BPROSTOCKP IS 'STOCK PRODUCTO',
  BPROIDCATE IS 'ID CATEGORIA',
  BPROTIPEVN IS 'TIPO EVENTO',
  BPROUSUEVN IS 'USUARIO EVENTO'
);

-- Descripción
LABEL ON COLUMN PRODUCTOB (
  BPROIDPROD TEXT IS 'ID DE PRODUCTO',
  BPROFECEVN TEXT IS 'FECHA DEL EVENTO',
  BPRONOMBRE TEXT IS 'NOMBRE DE PRODUCTO',
  BPROPRECIO TEXT IS 'PRECIO DE PRODUCTO',
  BPROSTOCKP TEXT IS 'STOCK DE PRODUCTO',
  BPROIDCATE TEXT IS 'ID DE CATEGORIA',
  BPROTIPEVN TEXT IS 'TIPO DE EVENTO',
  BPROUSUEVN TEXT IS 'USUARIO DEL EVENTO'
);

-- Comentarios
COMMENT ON COLUMN PRODUCTOB (
  BPROIDPROD IS 'ID DE PRODUCTO',
  BPROFECEVN IS 'FECHA DEL EVENTO',
  BPRONOMBRE IS 'NOMBRE DE PRODUCTO',
  BPROPRECIO IS 'PRECIO DE PRODUCTO',
  BPROSTOCKP IS 'STOCK DE PRODUCTO',
  BPROIDCATE IS 'ID DE CATEGORIA',
  BPROTIPEVN IS 'TIPO DE EVENTO: I-INSERCION, A-ACTUALIZACION, E-ELIMINACION',
  BPROUSUEVN IS 'USUARIO DEL EVENTO'
);
