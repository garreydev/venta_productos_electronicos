--==============================================================================
-- Nombre de la tabla:
--   CLIENTEB
-- Descripción:
--   Bitácora de la Tabla de Clientes.
-- Objetivo:
--   Almacenar los cambios realizados en la tabla de clientes, los cuales pueden
--   ser: inserción, actualización o eliminación.
-- Tipo de tabla:
--   Bitácora
-- Origen de los datos:
--   Se ingresa un registro cuando se realiza un cambio en la tabla de clientes.
--==============================================================================
-- Cambios Realizados
--   - No Cambio....: ID-001
--   - Responsable..: Danny García Reyes
--   - Fecha........: Febrero 2023
--   - Observaciones: Creación de la tabla.
--==============================================================================
CREATE TABLE CLIENTEB (
  ID_CLIENTE       FOR COLUMN BCLIIDCLIE INTEGER    NOT NULL,
  FECHA_EVENTO     FOR COLUMN BCLIFECEVN TIMESTAMP  NOT NULL,
  NOMBRE           FOR COLUMN BCLINOMCLI CHAR(50)   NOT NULL WITH DEFAULT '',
  APELLIDO         FOR COLUMN BCLIAPECLI CHAR(50)   NOT NULL WITH DEFAULT '',
  FECHA_NACIMIENTO FOR COLUMN BCLIFECNAC DATE       NOT NULL WITH DEFAULT,
  TELEFONO         FOR COLUMN BCLITELCLI NUMERIC(8) NOT NULL WITH DEFAULT 0,
  DIRECCION        FOR COLUMN BCLIDIRCLI CHAR(100)  NOT NULL WITH DEFAULT '',
  EMAIL            FOR COLUMN BCLIEMACLI CHAR(50)   NOT NULL WITH DEFAULT '',
  TIPO_EVENTO      FOR COLUMN BCLITIPEVN CHAR(1)    NOT NULL WITH DEFAULT 'I',
  USUARIO_EVENTO   FOR COLUMN BCLIUSUEVN CHAR(18)   NOT NULL WITH DEFAULT USER,
  CONSTRAINT BCLITIPEVN_CHK_CST CHECK (BCLITIPEVN IN ('I', 'A', 'E')),
  CONSTRAINT CLIENTEB_PK PRIMARY KEY (BCLIIDCLIE, BCLIFECEVN)
) RCDFMT RCLIENTEB;

RENAME TABLE CLIENTEB TO BITACORA_TABLA_DE_CLIENTES
  FOR SYSTEM NAME CLIENTEB;

LABEL ON TABLE CLIENTE IS 'BITACORA DE TABLA DE CLIENTES';

COMMENT ON TABLE CLIENTE IS 'BITACORA DE TABLA DE CLIENTES';

-- Headers
LABEL ON COLUMN CLIENTEB (
  BCLIIDCLIE IS 'ID CLIENTE',
  BCLIFECEVN IS 'FECHA EVENTO',
  BCLINOMCLI IS 'NOMBRE',
  BCLIAPECLI IS 'APELLIDO',
  BCLIFECNAC IS 'FECHA NACIMIENTO',
  BCLITELCLI IS 'TELEFONO',
  BCLIDIRCLI IS 'DIRECCION',
  BCLIEMACLI IS 'EMAIL',
  BCLITIPEVN IS 'TIPO EVENTO',
  BCLIUSUEVN IS 'USUARIO EVENTO'
);

-- Descripción
LABEL ON COLUMN CLIENTEB (
  BCLIIDCLIE TEXT IS 'ID DE CLIENTE',
  BCLIFECEVN TEXT IS 'FECHA DEL EVENTO',
  BCLINOMCLI TEXT IS 'NOMBRE DE CLIENTE',
  BCLIAPECLI TEXT IS 'APELLIDO DE CLIENTE',
  BCLIFECNAC TEXT IS 'FECHA DE NACIMIENTO',
  BCLITELCLI TEXT IS 'TELEFONO DE CLIENTE',
  BCLIDIRCLI TEXT IS 'DIRECCION DE CLIENTE',
  BCLIEMACLI TEXT IS 'EMAIL DE CLIENTE',
  BCLITIPEVN TEXT IS 'TIPO DE EVENTO',
  BCLIUSUEVN TEXT IS 'USUARIO DEL EVENTO'
);

-- Comentarios
COMMENT ON COLUMN CLIENTEB (
  BCLIIDCLIE IS 'ID DE CLIENTE',
  BCLIFECEVN IS 'FECHA DEL EVENTO',
  BCLINOMCLI IS 'NOMBRE DE CLIENTE',
  BCLIAPECLI IS 'APELLIDO DE CLIENTE',
  BCLIFECNAC IS 'FECHA DE NACIMIENTO',
  BCLITELCLI IS 'TELEFONO DE CLIENTE',
  BCLIDIRCLI IS 'DIRECCION DE CLIENTE',
  BCLIEMACLI IS 'EMAIL DE CLIENTE',
  BCLITIPEVN IS 'TIPO DE EVENTO: I-INSERCION, A-ACTUALIZACION, E-ELIMINACION',
  BCLIUSUEVN IS 'USUARIO DEL EVENTO'
);
